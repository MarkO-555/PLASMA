; ACME COMPATIBLE OUTPUT
	!WORD	_SEGEND-_SEGBEGIN	; LENGTH OF HEADER + CODE/DATA + BYTECODE SEGMENT
_SEGBEGIN 
	!WORD	$6502			; MAGIC #
	!WORD	_SYSFLAGS			; SYSTEM FLAGS
	!WORD	_SUBSEG			; BYTECODE SUB-SEGMENT
	!WORD	_DEFCNT			; BYTECODE DEF COUNT
	!WORD	_INIT			; MODULE INITIALIZATION ROUTINE
; libsrc/apple/dgrlib.pla: 0001: include "inc/cmdsys.plh"
; inc/cmdsys.plh: 0001: import cmdsys
	; DCI STRING: CMDSYS
	!BYTE	$C3,$CD,$C4,$D3,$D9,$53
					; CMDSYS -> X000
; inc/cmdsys.plh: 0002:     //
; inc/cmdsys.plh: 0003:     // Useful values for everyone
; inc/cmdsys.plh: 0004:     //
; inc/cmdsys.plh: 0005:     const _SYSVER_ = $0200 // Version built against
					; _SYSVER_ = 512
; inc/cmdsys.plh: 0006:     const FALSE    = 0
					; FALSE = 0
; inc/cmdsys.plh: 0007:     const TRUE     = not FALSE
					; TRUE = -1
; inc/cmdsys.plh: 0008:     const NULL     = 0
					; NULL = 0
; inc/cmdsys.plh: 0009:     //
; inc/cmdsys.plh: 0010:     // Machine ID values
; inc/cmdsys.plh: 0011:     //
; inc/cmdsys.plh: 0012:     const MACHID_CLOCK = $01
					; MACHID_CLOCK = 1
; inc/cmdsys.plh: 0013:     const MACHID_80COL = $02
					; MACHID_80COL = 2
; inc/cmdsys.plh: 0014:     const MACHID_MEM   = $03
					; MACHID_MEM = 3
; inc/cmdsys.plh: 0015:     const MACHID_64K   = $20
					; MACHID_64K = 32
; inc/cmdsys.plh: 0016:     const MACHID_128K  = $30
					; MACHID_128K = 48
; inc/cmdsys.plh: 0017:     const MACHID_MODEL = $C8
					; MACHID_MODEL = 200
; inc/cmdsys.plh: 0018:     const MACHID_II    = $00
					; MACHID_II = 0
; inc/cmdsys.plh: 0019:     const MACHID_IIPLUS= $40
					; MACHID_IIPLUS = 64
; inc/cmdsys.plh: 0020:     const MACHID_IIE   = $80
					; MACHID_IIE = 128
; inc/cmdsys.plh: 0021:     const MACHID_III   = $C0
					; MACHID_III = 192
; inc/cmdsys.plh: 0022:     const MACHID_IIC   = $88
					; MACHID_IIC = 136
; inc/cmdsys.plh: 0023:     const MACHID_I     = $08
					; MACHID_I = 8
; inc/cmdsys.plh: 0024:     byte MACHID
					; MACHID -> X001
; inc/cmdsys.plh: 0025:     //
; inc/cmdsys.plh: 0026:     // System flags: memory allocator screen holes.
; inc/cmdsys.plh: 0027:     //
; inc/cmdsys.plh: 0028:     const restxt1     = $0001
					; restxt1 = 1
; inc/cmdsys.plh: 0029:     const restxt2     = $0002
					; restxt2 = 2
; inc/cmdsys.plh: 0030:     const resxtxt1    = $0004
					; resxtxt1 = 4
; inc/cmdsys.plh: 0031:     const resxtxt2    = $0008
					; resxtxt2 = 8
; inc/cmdsys.plh: 0032:     const reshgr1     = $0010
					; reshgr1 = 16
; inc/cmdsys.plh: 0033:     const reshgr2     = $0020
					; reshgr2 = 32
; inc/cmdsys.plh: 0034:     const resxhgr1    = $0040
					; resxhgr1 = 64
; inc/cmdsys.plh: 0035:     const resxhgr2    = $0080
					; resxhgr2 = 128
; inc/cmdsys.plh: 0036:     const nojitc      = $0100
					; nojitc = 256
; inc/cmdsys.plh: 0037:     //
; inc/cmdsys.plh: 0038:     // Module don't free memory
; inc/cmdsys.plh: 0039:     //
; inc/cmdsys.plh: 0040:     const modkeep     = $2000
					; modkeep = 8192
; inc/cmdsys.plh: 0041:     const modinitkeep = $4000
					; modinitkeep = 16384
; inc/cmdsys.plh: 0042:     //
; inc/cmdsys.plh: 0043:     // CMD exported interface table
; inc/cmdsys.plh: 0044:     //
; inc/cmdsys.plh: 0045:     struc t_cmdsys
; inc/cmdsys.plh: 0046:         word sysver
					; sysver = 0
; inc/cmdsys.plh: 0047:         word syspath
					; syspath = 2
; inc/cmdsys.plh: 0048:         word cmdline
					; cmdline = 4
; inc/cmdsys.plh: 0049:         word modexec
					; modexec = 6
; inc/cmdsys.plh: 0050:         word sysopen
					; sysopen = 8
; inc/cmdsys.plh: 0051:         word sysclose
					; sysclose = 10
; inc/cmdsys.plh: 0052:         word sysread
					; sysread = 12
; inc/cmdsys.plh: 0053:         word syswrite
					; syswrite = 14
; inc/cmdsys.plh: 0054:         byte syserr
					; syserr = 16
; inc/cmdsys.plh: 0055:         byte jitcount
					; jitcount = 17
; inc/cmdsys.plh: 0056:         byte jitsize
					; jitsize = 18
; inc/cmdsys.plh: 0057:         byte refcons    // Apple /// specific
					; refcons = 19
; inc/cmdsys.plh: 0058:         byte devcons    // Apple /// specific
					; devcons = 20
; inc/cmdsys.plh: 0059:     end
					; t_cmdsys = 21
; inc/cmdsys.plh: 0060:     //
; inc/cmdsys.plh: 0061:     // CMD exported functions
; inc/cmdsys.plh: 0062:     //
; inc/cmdsys.plh: 0063:     predef putc(c)#0, putln()#0, puts(s)#0, puti(i)#0, getc()#1, gets(p)#1, putb(b)#0, puth(h)#0
					; PUTC -> X002
					; PUTLN -> X003
					; PUTS -> X004
					; PUTI -> X005
					; GETC -> X006
					; GETS -> X007
					; PUTB -> X008
					; PUTH -> X009
; inc/cmdsys.plh: 0064:     predef call(addr,areg,xreg,yreg,status)#1, syscall(cmd,params)#1
					; CALL -> X010
					; SYSCALL -> X011
; inc/cmdsys.plh: 0065:     predef heapmark()#1, heapallocalign(size, pow2, freeaddr)#1
					; HEAPMARK -> X012
					; HEAPALLOCALIGN -> X013
; inc/cmdsys.plh: 0066:     predef heapalloc(size)#1, heaprelease(newheap)#1, heapavail()#1
					; HEAPALLOC -> X014
					; HEAPRELEASE -> X015
					; HEAPAVAIL -> X016
; inc/cmdsys.plh: 0067:     predef memset(addr,value,size)#0, memcpy(dst,src,size)#0, strcpy(dst,src)#1, strcat(dst,src)#1
					; MEMSET -> X017
					; MEMCPY -> X018
					; STRCPY -> X019
					; STRCAT -> X020
; inc/cmdsys.plh: 0068:     predef toupper(c)#1, sext(a)#1, divmod(a,b)#2, isugt(a,b)#1, isuge(a,b)#1, isult(a,b)#1, isule(a,b)#1
					; TOUPPER -> X021
					; SEXT -> X022
					; DIVMOD -> X023
					; ISUGT -> X024
					; ISUGE -> X025
					; ISULT -> X026
					; ISULE -> X027
; inc/cmdsys.plh: 0069: end
; libsrc/apple/dgrlib.pla: 0001: 
; libsrc/apple/dgrlib.pla: 0002: //
; libsrc/apple/dgrlib.pla: 0003: // Apple II hardware constants.
; libsrc/apple/dgrlib.pla: 0004: //
; libsrc/apple/dgrlib.pla: 0005: const showgraphics = $C050
	!BYTE	$00			; END OF MODULE DEPENDENCIES
					; showgraphics = 49232
; libsrc/apple/dgrlib.pla: 0006: const showtext     = $C051
					; showtext = 49233
; libsrc/apple/dgrlib.pla: 0007: const showfull     = $C052
					; showfull = 49234
; libsrc/apple/dgrlib.pla: 0008: const showmix      = $C053
					; showmix = 49235
; libsrc/apple/dgrlib.pla: 0009: const showpage1    = $C054
					; showpage1 = 49236
; libsrc/apple/dgrlib.pla: 0010: const showpage2    = $C055
					; showpage2 = 49237
; libsrc/apple/dgrlib.pla: 0011: const showlores    = $C056
					; showlores = 49238
; libsrc/apple/dgrlib.pla: 0012: const showhires    = $C057
					; showhires = 49239
; libsrc/apple/dgrlib.pla: 0013: const show40       = $C00C
					; show40 = 49164
; libsrc/apple/dgrlib.pla: 0014: const show80       = $C00D
					; show80 = 49165
; libsrc/apple/dgrlib.pla: 0015: const mapmain      = $C000
					; mapmain = 49152
; libsrc/apple/dgrlib.pla: 0016: const mapaux       = $C001
					; mapaux = 49153
; libsrc/apple/dgrlib.pla: 0017: const an3on        = $C05E
					; an3on = 49246
; libsrc/apple/dgrlib.pla: 0018: const an3off       = $C05F
					; an3off = 49247
; libsrc/apple/dgrlib.pla: 0019: const ena80        = $C07E
					; ena80 = 49278
; libsrc/apple/dgrlib.pla: 0020: const dis80        = $C07F
					; dis80 = 49279
; libsrc/apple/dgrlib.pla: 0021: const page1        = 0
					; page1 = 0
; libsrc/apple/dgrlib.pla: 0022: const page2        = 1
					; page2 = 1
; libsrc/apple/dgrlib.pla: 0023: //
; libsrc/apple/dgrlib.pla: 0024: // Screen row address arrays.
; libsrc/apple/dgrlib.pla: 0025: //
; libsrc/apple/dgrlib.pla: 0026: word[] dgr1row = $0400,$0480,$0500,$0580,$0600,$0680,$0700,$0780
_D028 					; dgr1row = $0400,$0480,$0500,$0580,$0600,$0680,$0700,$0780
	!WORD	$0400
	!WORD	$0480
	!WORD	$0500
	!WORD	$0580
	!WORD	$0600
	!WORD	$0680
	!WORD	$0700
	!WORD	$0780
; libsrc/apple/dgrlib.pla: 0027: word           = $0428,$04A8,$0528,$05A8,$0628,$06A8,$0728,$07A8
	!WORD	$0428
	!WORD	$04A8
	!WORD	$0528
	!WORD	$05A8
	!WORD	$0628
	!WORD	$06A8
	!WORD	$0728
	!WORD	$07A8
; libsrc/apple/dgrlib.pla: 0028: word           = $0450,$04D0,$0550,$05D0,$0650,$06D0,$0750,$07D0
	!WORD	$0450
	!WORD	$04D0
	!WORD	$0550
	!WORD	$05D0
	!WORD	$0650
	!WORD	$06D0
	!WORD	$0750
	!WORD	$07D0
; libsrc/apple/dgrlib.pla: 0029: word[] dgr2row = $0800,$0880,$0900,$0980,$0A00,$0A80,$0B00,$0B80
_D029 					; dgr2row = $0800,$0880,$0900,$0980,$0A00,$0A80,$0B00,$0B80
	!WORD	$0800
	!WORD	$0880
	!WORD	$0900
	!WORD	$0980
	!WORD	$0A00
	!WORD	$0A80
	!WORD	$0B00
	!WORD	$0B80
; libsrc/apple/dgrlib.pla: 0030: word           = $0828,$08A8,$0928,$09A8,$0A28,$0AA8,$0B28,$0BA8
	!WORD	$0828
	!WORD	$08A8
	!WORD	$0928
	!WORD	$09A8
	!WORD	$0A28
	!WORD	$0AA8
	!WORD	$0B28
	!WORD	$0BA8
; libsrc/apple/dgrlib.pla: 0031: word           = $0850,$08D0,$0950,$09D0,$0A50,$0AD0,$0B50,$0BD0
	!WORD	$0850
	!WORD	$08D0
	!WORD	$0950
	!WORD	$09D0
	!WORD	$0A50
	!WORD	$0AD0
	!WORD	$0B50
	!WORD	$0BD0
; libsrc/apple/dgrlib.pla: 0032: word[] dgrbuff = @dgr1row, @dgr2row
_D030 					; dgrbuff = @dgr1row, @dgr2row
_F000 	!WORD	_D028
_F001 	!WORD	_D029
; libsrc/apple/dgrlib.pla: 0033: word drawbuff
_D031 	!FILL	2			; drawbuff
; libsrc/apple/dgrlib.pla: 0034: byte drawpage
_D032 	!FILL	1			; drawpage
; libsrc/apple/dgrlib.pla: 0035: //
; libsrc/apple/dgrlib.pla: 0036: // Color mapping.
; libsrc/apple/dgrlib.pla: 0037: //
; libsrc/apple/dgrlib.pla: 0038: byte[] evnclr = $00,$88,$11,$99,$22,$AA,$33,$BB
_D033 					; evnclr = $00,$88,$11,$99,$22,$AA,$33,$BB
	!BYTE	$00
	!BYTE	$88
	!BYTE	$11
	!BYTE	$99
	!BYTE	$22
	!BYTE	$AA
	!BYTE	$33
	!BYTE	$BB
; libsrc/apple/dgrlib.pla: 0039: byte[]        = $44,$CC,$55,$DD,$66,$EE,$77,$FF
	!BYTE	$44
	!BYTE	$CC
	!BYTE	$55
	!BYTE	$DD
	!BYTE	$66
	!BYTE	$EE
	!BYTE	$77
	!BYTE	$FF
; libsrc/apple/dgrlib.pla: 0040: byte[] oddclr = $00,$11,$22,$33,$44,$55,$66,$77
_D034 					; oddclr = $00,$11,$22,$33,$44,$55,$66,$77
	!BYTE	$00
	!BYTE	$11
	!BYTE	$22
	!BYTE	$33
	!BYTE	$44
	!BYTE	$55
	!BYTE	$66
	!BYTE	$77
; libsrc/apple/dgrlib.pla: 0041: byte[]        = $88,$99,$AA,$BB,$CC,$DD,$EE,$FF
	!BYTE	$88
	!BYTE	$99
	!BYTE	$AA
	!BYTE	$BB
	!BYTE	$CC
	!BYTE	$DD
	!BYTE	$EE
	!BYTE	$FF
; libsrc/apple/dgrlib.pla: 0042: 
; libsrc/apple/dgrlib.pla: 0043: asm dgrInc(buff)
_A000 					; dgrInc()
; libsrc/apple/dgrlib.pla: 0044: !SOURCE    "vmsrc/plvmzp.inc"
!SOURCE    "vmsrc/plvmzp.inc"
; libsrc/apple/dgrlib.pla: 0045: GBASL    =    $26
GBASL    =    $26
; libsrc/apple/dgrlib.pla: 0046: GBASH    =    $27
GBASH    =    $27
; libsrc/apple/dgrlib.pla: 0047: GBASE    =    GBASL
GBASE    =    GBASL
; libsrc/apple/dgrlib.pla: 0048: GCLR     =    $30
GCLR     =    $30
; libsrc/apple/dgrlib.pla: 0049: end
; libsrc/apple/dgrlib.pla: 0050: //
; libsrc/apple/dgrlib.pla: 0051: // Plot pixel
; libsrc/apple/dgrlib.pla: 0052: //
; libsrc/apple/dgrlib.pla: 0053: export asm dgrPlot(x, y)#0
_A001 					; dgrPlot()
; libsrc/apple/dgrlib.pla: 0054:         ; GET ROW BUFFER ADDRESSES
        ; GET ROW BUFFER ADDRESSES
; libsrc/apple/dgrlib.pla: 0055: 		LDA     $3000
		LDA     $3000
; libsrc/apple/dgrlib.pla: 0056:         STA     SRCL
        STA     SRCL
; libsrc/apple/dgrlib.pla: 0057:         LDA     $3001
        LDA     $3001
; libsrc/apple/dgrlib.pla: 0058: 		STA		SRCH
		STA		SRCH
; libsrc/apple/dgrlib.pla: 0059:         STX     ESP
        STX     ESP
; libsrc/apple/dgrlib.pla: 0060:         LDA     ESTKL,X     ; Y COORD
        LDA     ESTKL,X     ; Y COORD
; libsrc/apple/dgrlib.pla: 0061:         AND     #$FE
        AND     #$FE
; libsrc/apple/dgrlib.pla: 0062:         TAY
        TAY
; libsrc/apple/dgrlib.pla: 0063:         LDA     (SRC),Y
        LDA     (SRC),Y
; libsrc/apple/dgrlib.pla: 0064:         STA     GBASL
        STA     GBASL
; libsrc/apple/dgrlib.pla: 0065:         INY
        INY
; libsrc/apple/dgrlib.pla: 0066:         LDA     (SRC),Y
        LDA     (SRC),Y
; libsrc/apple/dgrlib.pla: 0067:         STA     GBASH
        STA     GBASH
; libsrc/apple/dgrlib.pla: 0068:         LDA     ESTKL+1,X   ; X COORD
        LDA     ESTKL+1,X   ; X COORD
; libsrc/apple/dgrlib.pla: 0069:         LSR     ESTKL,X
        LSR     ESTKL,X
; libsrc/apple/dgrlib.pla: 0070:         LDX     GCLR        ; COLOR
        LDX     GCLR        ; COLOR
; libsrc/apple/dgrlib.pla: 0071:         PHP
        PHP
; libsrc/apple/dgrlib.pla: 0072:         SEI
        SEI
; libsrc/apple/dgrlib.pla: 0073: end
; libsrc/apple/dgrlib.pla: 0074: asm _dgrPlotPix
_A002 					; _dgrPlotPix()
; libsrc/apple/dgrlib.pla: 0075:         JSR     $3000       ; _dgrSetPix
        JSR     $3000       ; _dgrSetPix
; libsrc/apple/dgrlib.pla: 0076:         PLP
        PLP
; libsrc/apple/dgrlib.pla: 0077:         LDX     ESP
        LDX     ESP
; libsrc/apple/dgrlib.pla: 0078:         INX
        INX
; libsrc/apple/dgrlib.pla: 0079:         INX
        INX
; libsrc/apple/dgrlib.pla: 0080:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0081: end
; libsrc/apple/dgrlib.pla: 0082: //
; libsrc/apple/dgrlib.pla: 0083: // Plot horizontal row of pixels
; libsrc/apple/dgrlib.pla: 0084: //
; libsrc/apple/dgrlib.pla: 0085: export asm dgrHLin(x1, x2, y)#0
_A003 					; dgrHLin()
; libsrc/apple/dgrlib.pla: 0086:         ; GET ROW BUFFER ADDRESSES
        ; GET ROW BUFFER ADDRESSES
; libsrc/apple/dgrlib.pla: 0087: 		LDA     $3000
		LDA     $3000
; libsrc/apple/dgrlib.pla: 0088:         STA     SRCL
        STA     SRCL
; libsrc/apple/dgrlib.pla: 0089:         LDA     $3001
        LDA     $3001
; libsrc/apple/dgrlib.pla: 0090: 		STA		SRCH
		STA		SRCH
; libsrc/apple/dgrlib.pla: 0091:         STX     ESP
        STX     ESP
; libsrc/apple/dgrlib.pla: 0092:         LDA     ESTKL+1,X    ; X2 COORD
        LDA     ESTKL+1,X    ; X2 COORD
; libsrc/apple/dgrlib.pla: 0093:         STA     TMPH
        STA     TMPH
; libsrc/apple/dgrlib.pla: 0094:         LDA     ESTKL+0,X    ; Y COORD
        LDA     ESTKL+0,X    ; Y COORD
; libsrc/apple/dgrlib.pla: 0095:         AND     #$FE
        AND     #$FE
; libsrc/apple/dgrlib.pla: 0096:         TAY
        TAY
; libsrc/apple/dgrlib.pla: 0097:         LDA     (SRC),Y
        LDA     (SRC),Y
; libsrc/apple/dgrlib.pla: 0098:         STA     GBASL
        STA     GBASL
; libsrc/apple/dgrlib.pla: 0099:         INY
        INY
; libsrc/apple/dgrlib.pla: 0100:         LDA     (SRC),Y
        LDA     (SRC),Y
; libsrc/apple/dgrlib.pla: 0101:         STA     GBASH
        STA     GBASH
; libsrc/apple/dgrlib.pla: 0102:         LDY     ESTKL+2,X   ; X1 COORD
        LDY     ESTKL+2,X   ; X1 COORD
; libsrc/apple/dgrlib.pla: 0103:         PHP
        PHP
; libsrc/apple/dgrlib.pla: 0104:         SEI
        SEI
; libsrc/apple/dgrlib.pla: 0105: -       LDA     ESTKL+0,X   ; Y COORD
-       LDA     ESTKL+0,X   ; Y COORD
; libsrc/apple/dgrlib.pla: 0106:         LSR
        LSR
; libsrc/apple/dgrlib.pla: 0107:         TYA
        TYA
; libsrc/apple/dgrlib.pla: 0108:         LDX     GCLR        ; COLOR
        LDX     GCLR        ; COLOR
; libsrc/apple/dgrlib.pla: 0109: end
; libsrc/apple/dgrlib.pla: 0110: asm _dgrHLinPix
_A004 					; _dgrHLinPix()
; libsrc/apple/dgrlib.pla: 0111:         JSR     $3000       ; _dgrSetPix
        JSR     $3000       ; _dgrSetPix
; libsrc/apple/dgrlib.pla: 0112:         LDX     ESP
        LDX     ESP
; libsrc/apple/dgrlib.pla: 0113:         INC     ESTKL+2,X   ; X1 COORD
        INC     ESTKL+2,X   ; X1 COORD
; libsrc/apple/dgrlib.pla: 0114:         LDY     ESTKL+2,X
        LDY     ESTKL+2,X
; libsrc/apple/dgrlib.pla: 0115:         CPY     TMPH        ; X2 COORD
        CPY     TMPH        ; X2 COORD
; libsrc/apple/dgrlib.pla: 0116:         BCC     -
        BCC     -
; libsrc/apple/dgrlib.pla: 0117:         BEQ     -
        BEQ     -
; libsrc/apple/dgrlib.pla: 0118:         PLP
        PLP
; libsrc/apple/dgrlib.pla: 0119:         INX
        INX
; libsrc/apple/dgrlib.pla: 0120:         INX
        INX
; libsrc/apple/dgrlib.pla: 0121:         INX
        INX
; libsrc/apple/dgrlib.pla: 0122:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0123: end
; libsrc/apple/dgrlib.pla: 0124: //
; libsrc/apple/dgrlib.pla: 0125: // Plot horizontal row of pixels
; libsrc/apple/dgrlib.pla: 0126: //
; libsrc/apple/dgrlib.pla: 0127: export asm dgrVLin(y1, y2, x)#0
_A005 					; dgrVLin()
; libsrc/apple/dgrlib.pla: 0128:         ; GET ROW BUFFER ADDRESSES
        ; GET ROW BUFFER ADDRESSES
; libsrc/apple/dgrlib.pla: 0129: 		LDA     $3000
		LDA     $3000
; libsrc/apple/dgrlib.pla: 0130:         STA     SRCL
        STA     SRCL
; libsrc/apple/dgrlib.pla: 0131:         LDA     $3001
        LDA     $3001
; libsrc/apple/dgrlib.pla: 0132: 		STA		SRCH
		STA		SRCH
; libsrc/apple/dgrlib.pla: 0133:         STX     ESP
        STX     ESP
; libsrc/apple/dgrlib.pla: 0134:         LDA     ESTKL+2,X   ; Y1 COORD
        LDA     ESTKL+2,X   ; Y1 COORD
; libsrc/apple/dgrlib.pla: 0135:         PHP
        PHP
; libsrc/apple/dgrlib.pla: 0136:         SEI
        SEI
; libsrc/apple/dgrlib.pla: 0137: -       AND     #$FE
-       AND     #$FE
; libsrc/apple/dgrlib.pla: 0138:         TAY
        TAY
; libsrc/apple/dgrlib.pla: 0139:         LDA     (SRC),Y
        LDA     (SRC),Y
; libsrc/apple/dgrlib.pla: 0140:         STA     GBASL
        STA     GBASL
; libsrc/apple/dgrlib.pla: 0141:         INY
        INY
; libsrc/apple/dgrlib.pla: 0142:         LDA     (SRC),Y
        LDA     (SRC),Y
; libsrc/apple/dgrlib.pla: 0143:         STA     GBASH
        STA     GBASH
; libsrc/apple/dgrlib.pla: 0144:         LDA     ESTKL+2,X
        LDA     ESTKL+2,X
; libsrc/apple/dgrlib.pla: 0145:         LSR
        LSR
; libsrc/apple/dgrlib.pla: 0146:         LDA     ESTKL+0,X   ; X COORD
        LDA     ESTKL+0,X   ; X COORD
; libsrc/apple/dgrlib.pla: 0147:         LDX     GCLR        ; COLOR
        LDX     GCLR        ; COLOR
; libsrc/apple/dgrlib.pla: 0148: end
; libsrc/apple/dgrlib.pla: 0149: asm _dgrVLinPix
_A006 					; _dgrVLinPix()
; libsrc/apple/dgrlib.pla: 0150:         JSR     $3000       ; _dgrSetPix
        JSR     $3000       ; _dgrSetPix
; libsrc/apple/dgrlib.pla: 0151:         LDX     ESP
        LDX     ESP
; libsrc/apple/dgrlib.pla: 0152:         INC     ESTKL+2,X   ; Y1 COORD
        INC     ESTKL+2,X   ; Y1 COORD
; libsrc/apple/dgrlib.pla: 0153:         LDA     ESTKL+2,X
        LDA     ESTKL+2,X
; libsrc/apple/dgrlib.pla: 0154:         CMP     ESTKL+1,X   ; Y2 COORD
        CMP     ESTKL+1,X   ; Y2 COORD
; libsrc/apple/dgrlib.pla: 0155:         BCC     -
        BCC     -
; libsrc/apple/dgrlib.pla: 0156:         BEQ     -
        BEQ     -
; libsrc/apple/dgrlib.pla: 0157:         PLP
        PLP
; libsrc/apple/dgrlib.pla: 0158:         INX
        INX
; libsrc/apple/dgrlib.pla: 0159:         INX
        INX
; libsrc/apple/dgrlib.pla: 0160:         INX
        INX
; libsrc/apple/dgrlib.pla: 0161:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0162: end
; libsrc/apple/dgrlib.pla: 0163: //
; libsrc/apple/dgrlib.pla: 0164: // Draw sprite
; libsrc/apple/dgrlib.pla: 0165: //
; libsrc/apple/dgrlib.pla: 0166: export asm dgrBLT(x, y, width, height, src)#0
_A007 					; dgrBLT()
; libsrc/apple/dgrlib.pla: 0167:         ; GET ROW BUFFER ADDRESSES
        ; GET ROW BUFFER ADDRESSES
; libsrc/apple/dgrlib.pla: 0168: 		LDA     $3000
		LDA     $3000
; libsrc/apple/dgrlib.pla: 0169:         STA     DSTL
        STA     DSTL
; libsrc/apple/dgrlib.pla: 0170:         LDA     $3001
        LDA     $3001
; libsrc/apple/dgrlib.pla: 0171: 		STA		DSTH
		STA		DSTH
; libsrc/apple/dgrlib.pla: 0172:         LDA     ESTKL,X     ; SPRITE
        LDA     ESTKL,X     ; SPRITE
; libsrc/apple/dgrlib.pla: 0173:         STA     SRCL
        STA     SRCL
; libsrc/apple/dgrlib.pla: 0174:         LDA     ESTKH,X
        LDA     ESTKH,X
; libsrc/apple/dgrlib.pla: 0175:         STA     SRCH
        STA     SRCH
; libsrc/apple/dgrlib.pla: 0176:         LDA     ESTKL+4,X   ; X1 COORD
        LDA     ESTKL+4,X   ; X1 COORD
; libsrc/apple/dgrlib.pla: 0177:         CMP     #80
        CMP     #80
; libsrc/apple/dgrlib.pla: 0178:         BPL     ++++
        BPL     ++++
; libsrc/apple/dgrlib.pla: 0179:         CLC
        CLC
; libsrc/apple/dgrlib.pla: 0180:         ADC     ESTKL+2,X
        ADC     ESTKL+2,X
; libsrc/apple/dgrlib.pla: 0181:         BMI     ++++
        BMI     ++++
; libsrc/apple/dgrlib.pla: 0182:         STA     ESTKH+2,X   ; X2 COORD
        STA     ESTKH+2,X   ; X2 COORD
; libsrc/apple/dgrlib.pla: 0183:         LDA     ESTKL+3,X   ; Y1 COORD
        LDA     ESTKL+3,X   ; Y1 COORD
; libsrc/apple/dgrlib.pla: 0184:         CMP     #48
        CMP     #48
; libsrc/apple/dgrlib.pla: 0185:         BPL     ++++
        BPL     ++++
; libsrc/apple/dgrlib.pla: 0186:         STA     ESTKH+3,X   ; Y COORD
        STA     ESTKH+3,X   ; Y COORD
; libsrc/apple/dgrlib.pla: 0187:         CLC
        CLC
; libsrc/apple/dgrlib.pla: 0188:         ADC     ESTKL+1,X
        ADC     ESTKL+1,X
; libsrc/apple/dgrlib.pla: 0189:         BMI     ++++
        BMI     ++++
; libsrc/apple/dgrlib.pla: 0190:         STA     ESTKH+1,X   ; Y2 COORD
        STA     ESTKH+1,X   ; Y2 COORD
; libsrc/apple/dgrlib.pla: 0191:         STX     ESP
        STX     ESP
; libsrc/apple/dgrlib.pla: 0192:         LDA     ESTKH+3,X
        LDA     ESTKH+3,X
; libsrc/apple/dgrlib.pla: 0193: -       CMP     #48
-       CMP     #48
; libsrc/apple/dgrlib.pla: 0194:         BCC     +
        BCC     +
; libsrc/apple/dgrlib.pla: 0195:         LDA     SRCL        ; SKIP TO NEXT ROW
        LDA     SRCL        ; SKIP TO NEXT ROW
; libsrc/apple/dgrlib.pla: 0196:         CLC
        CLC
; libsrc/apple/dgrlib.pla: 0197:         ADC     ESTKL+2,X   ; WIDTH
        ADC     ESTKL+2,X   ; WIDTH
; libsrc/apple/dgrlib.pla: 0198:         STA     SRCL
        STA     SRCL
; libsrc/apple/dgrlib.pla: 0199:         BCC     +++
        BCC     +++
; libsrc/apple/dgrlib.pla: 0200:         INC     SRCH
        INC     SRCH
; libsrc/apple/dgrlib.pla: 0201:         BNE     +++
        BNE     +++
; libsrc/apple/dgrlib.pla: 0202: +       AND     #$FE
+       AND     #$FE
; libsrc/apple/dgrlib.pla: 0203:         TAY
        TAY
; libsrc/apple/dgrlib.pla: 0204:         LDA     (DST),Y
        LDA     (DST),Y
; libsrc/apple/dgrlib.pla: 0205:         STA     GBASL
        STA     GBASL
; libsrc/apple/dgrlib.pla: 0206:         INY
        INY
; libsrc/apple/dgrlib.pla: 0207:         LDA     (DST),Y
        LDA     (DST),Y
; libsrc/apple/dgrlib.pla: 0208:         STA     GBASH
        STA     GBASH
; libsrc/apple/dgrlib.pla: 0209:         LDA     ESTKL+4,X   ; X1 COORD
        LDA     ESTKL+4,X   ; X1 COORD
; libsrc/apple/dgrlib.pla: 0210:         STA     ESTKH+4,X   ; X COORD
        STA     ESTKH+4,X   ; X COORD
; libsrc/apple/dgrlib.pla: 0211:         PHP
        PHP
; libsrc/apple/dgrlib.pla: 0212:         SEI
        SEI
; libsrc/apple/dgrlib.pla: 0213: --      CMP     #80
--      CMP     #80
; libsrc/apple/dgrlib.pla: 0214:         BCS     ++
        BCS     ++
; libsrc/apple/dgrlib.pla: 0215:         STA     TMP
        STA     TMP
; libsrc/apple/dgrlib.pla: 0216:         LDA     ESTKH+3,X   ; Y COORD
        LDA     ESTKH+3,X   ; Y COORD
; libsrc/apple/dgrlib.pla: 0217:         LSR
        LSR
; libsrc/apple/dgrlib.pla: 0218:         LDY     #$00
        LDY     #$00
; libsrc/apple/dgrlib.pla: 0219:         LDA     (SRC),Y
        LDA     (SRC),Y
; libsrc/apple/dgrlib.pla: 0220:         BMI     ++
        BMI     ++
; libsrc/apple/dgrlib.pla: 0221:         TAX
        TAX
; libsrc/apple/dgrlib.pla: 0222:         LDA     TMP
        LDA     TMP
; libsrc/apple/dgrlib.pla: 0223: end
; libsrc/apple/dgrlib.pla: 0224: asm _dgrBLTPix
_A008 					; _dgrBLTPix()
; libsrc/apple/dgrlib.pla: 0225:         JSR     $4000       ; _dgrSetPix
        JSR     $4000       ; _dgrSetPix
; libsrc/apple/dgrlib.pla: 0226:         LDX     ESP
        LDX     ESP
; libsrc/apple/dgrlib.pla: 0227: ++      INC     SRCL
++      INC     SRCL
; libsrc/apple/dgrlib.pla: 0228:         BNE     +
        BNE     +
; libsrc/apple/dgrlib.pla: 0229:         INC     SRCH
        INC     SRCH
; libsrc/apple/dgrlib.pla: 0230: +       INC     ESTKH+4,X   ; X COORD
+       INC     ESTKH+4,X   ; X COORD
; libsrc/apple/dgrlib.pla: 0231:         LDA     ESTKH+4,X
        LDA     ESTKH+4,X
; libsrc/apple/dgrlib.pla: 0232:         BMI     --
        BMI     --
; libsrc/apple/dgrlib.pla: 0233:         CMP     ESTKH+2,X   ; X2 COORD
        CMP     ESTKH+2,X   ; X2 COORD
; libsrc/apple/dgrlib.pla: 0234:         BCC     --
        BCC     --
; libsrc/apple/dgrlib.pla: 0235:         PLP
        PLP
; libsrc/apple/dgrlib.pla: 0236: +++     INC     ESTKH+3,X   ; Y COORD
+++     INC     ESTKH+3,X   ; Y COORD
; libsrc/apple/dgrlib.pla: 0237:         LDA     ESTKH+3,X
        LDA     ESTKH+3,X
; libsrc/apple/dgrlib.pla: 0238:         BMI     -
        BMI     -
; libsrc/apple/dgrlib.pla: 0239:         CMP     ESTKH+1,X   ; Y2 COORD
        CMP     ESTKH+1,X   ; Y2 COORD
; libsrc/apple/dgrlib.pla: 0240:         BCC     -
        BCC     -
; libsrc/apple/dgrlib.pla: 0241: ++++    INX
++++    INX
; libsrc/apple/dgrlib.pla: 0242:         INX
        INX
; libsrc/apple/dgrlib.pla: 0243:         INX
        INX
; libsrc/apple/dgrlib.pla: 0244:         INX
        INX
; libsrc/apple/dgrlib.pla: 0245:         INX
        INX
; libsrc/apple/dgrlib.pla: 0246:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0247: end
; libsrc/apple/dgrlib.pla: 0248: //
; libsrc/apple/dgrlib.pla: 0249: // Internal set pixel routine
; libsrc/apple/dgrlib.pla: 0250: //  - It expects the carry to be set for even or odd scanlines. Bad.
; libsrc/apple/dgrlib.pla: 0251: //  - ACCUM has horizontal coordinate
; libsrc/apple/dgrlib.pla: 0252: //  - X_REG has color
; libsrc/apple/dgrlib.pla: 0253: //  - GBASE points to scanline
; libsrc/apple/dgrlib.pla: 0254: //
; libsrc/apple/dgrlib.pla: 0255: asm _dgrSetPix
_A009 					; _dgrSetPix()
; libsrc/apple/dgrlib.pla: 0256:         BCS     ++
        BCS     ++
; libsrc/apple/dgrlib.pla: 0257:         ; EVEN ROW
        ; EVEN ROW
; libsrc/apple/dgrlib.pla: 0258:         LSR
        LSR
; libsrc/apple/dgrlib.pla: 0259:         TAY
        TAY
; libsrc/apple/dgrlib.pla: 0260:         BCS     +
        BCS     +
; libsrc/apple/dgrlib.pla: 0261: end
; libsrc/apple/dgrlib.pla: 0262: asm _dgrSetEvnEvn
_A010 					; _dgrSetEvnEvn()
; libsrc/apple/dgrlib.pla: 0263:         ; EVEN PIXEL
        ; EVEN PIXEL
; libsrc/apple/dgrlib.pla: 0264:         LDA     $2000,X
        LDA     $2000,X
; libsrc/apple/dgrlib.pla: 0265:         AND     #$0F
        AND     #$0F
; libsrc/apple/dgrlib.pla: 0266:         STA     TMP
        STA     TMP
; libsrc/apple/dgrlib.pla: 0267:         JSR     $0100       ; LDA AUX (DST),Y
        JSR     $0100       ; LDA AUX (DST),Y
; libsrc/apple/dgrlib.pla: 0268:         AND     #$F0
        AND     #$F0
; libsrc/apple/dgrlib.pla: 0269:         ORA     TMP
        ORA     TMP
; libsrc/apple/dgrlib.pla: 0270:         STA     $C005       ; WRITE AUX MEM
        STA     $C005       ; WRITE AUX MEM
; libsrc/apple/dgrlib.pla: 0271:         STA     (GBASE),Y
        STA     (GBASE),Y
; libsrc/apple/dgrlib.pla: 0272:         STA     $C004       ; WRITE MAIN MEM
        STA     $C004       ; WRITE MAIN MEM
; libsrc/apple/dgrlib.pla: 0273:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0274: end
; libsrc/apple/dgrlib.pla: 0275: asm _dgrSetEvnOdd
_A011 					; _dgrSetEvnOdd()
; libsrc/apple/dgrlib.pla: 0276:         ; ODD PIXEL
        ; ODD PIXEL
; libsrc/apple/dgrlib.pla: 0277: +       LDA     $1000,X
+       LDA     $1000,X
; libsrc/apple/dgrlib.pla: 0278:         AND     #$0F
        AND     #$0F
; libsrc/apple/dgrlib.pla: 0279:         STA     TMP
        STA     TMP
; libsrc/apple/dgrlib.pla: 0280:         LDA     (GBASE),Y
        LDA     (GBASE),Y
; libsrc/apple/dgrlib.pla: 0281:         AND     #$F0
        AND     #$F0
; libsrc/apple/dgrlib.pla: 0282:         ORA     TMP
        ORA     TMP
; libsrc/apple/dgrlib.pla: 0283:         STA     (GBASE),Y
        STA     (GBASE),Y
; libsrc/apple/dgrlib.pla: 0284:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0285:         ; ODD ROW
        ; ODD ROW
; libsrc/apple/dgrlib.pla: 0286: ++      LSR
++      LSR
; libsrc/apple/dgrlib.pla: 0287:         TAY
        TAY
; libsrc/apple/dgrlib.pla: 0288:         BCS     +++
        BCS     +++
; libsrc/apple/dgrlib.pla: 0289: end
; libsrc/apple/dgrlib.pla: 0290: asm _dgrSetOddEvn
_A012 					; _dgrSetOddEvn()
; libsrc/apple/dgrlib.pla: 0291:         ; EVEN PIXEL
        ; EVEN PIXEL
; libsrc/apple/dgrlib.pla: 0292:         LDA     $2000,X
        LDA     $2000,X
; libsrc/apple/dgrlib.pla: 0293:         AND     #$F0
        AND     #$F0
; libsrc/apple/dgrlib.pla: 0294:         STA     TMP
        STA     TMP
; libsrc/apple/dgrlib.pla: 0295:         JSR     $0100       ; LDA AUX (DST),Y
        JSR     $0100       ; LDA AUX (DST),Y
; libsrc/apple/dgrlib.pla: 0296:         AND     #$0F
        AND     #$0F
; libsrc/apple/dgrlib.pla: 0297:         ORA     TMP
        ORA     TMP
; libsrc/apple/dgrlib.pla: 0298:         STA     $C005       ; WRITE AUX MEM
        STA     $C005       ; WRITE AUX MEM
; libsrc/apple/dgrlib.pla: 0299:         STA     (GBASE),Y
        STA     (GBASE),Y
; libsrc/apple/dgrlib.pla: 0300:         STA     $C004       ; WRITE MAIN MEM
        STA     $C004       ; WRITE MAIN MEM
; libsrc/apple/dgrlib.pla: 0301:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0302: end
; libsrc/apple/dgrlib.pla: 0303: asm _dgrSetOddOdd
_A013 					; _dgrSetOddOdd()
; libsrc/apple/dgrlib.pla: 0304:         ; ODD PIXEL
        ; ODD PIXEL
; libsrc/apple/dgrlib.pla: 0305: +++     LDA     $1000,X
+++     LDA     $1000,X
; libsrc/apple/dgrlib.pla: 0306:         AND     #$F0
        AND     #$F0
; libsrc/apple/dgrlib.pla: 0307:         STA     TMP
        STA     TMP
; libsrc/apple/dgrlib.pla: 0308:         LDA     (GBASE),Y
        LDA     (GBASE),Y
; libsrc/apple/dgrlib.pla: 0309:         AND     #$0F
        AND     #$0F
; libsrc/apple/dgrlib.pla: 0310:         ORA     TMP
        ORA     TMP
; libsrc/apple/dgrlib.pla: 0311:         STA     (GBASE),Y
        STA     (GBASE),Y
; libsrc/apple/dgrlib.pla: 0312:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0313: end
; libsrc/apple/dgrlib.pla: 0314: //
; libsrc/apple/dgrlib.pla: 0315: // This gets copied to $0100!!!
; libsrc/apple/dgrlib.pla: 0316: //
; libsrc/apple/dgrlib.pla: 0317: asm auxRead
_A014 					; auxRead()
; libsrc/apple/dgrlib.pla: 0318:         STA     $C003       ; READ AUX MEM
        STA     $C003       ; READ AUX MEM
; libsrc/apple/dgrlib.pla: 0319:         LDA     (GBASE),Y
        LDA     (GBASE),Y
; libsrc/apple/dgrlib.pla: 0320:         STA     $C002       ; READ MAIN MEM
        STA     $C002       ; READ MAIN MEM
; libsrc/apple/dgrlib.pla: 0321:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0322: end
; libsrc/apple/dgrlib.pla: 0323: //
; libsrc/apple/dgrlib.pla: 0324: // Draw 8x8 tile (forced to 2x2 block address)
; libsrc/apple/dgrlib.pla: 0325: //
; libsrc/apple/dgrlib.pla: 0326: export asm dgrTile(x, y, src)#0
_A015 					; dgrTile()
; libsrc/apple/dgrlib.pla: 0327:         ; GET ROW BUFFER ADDRESSES
        ; GET ROW BUFFER ADDRESSES
; libsrc/apple/dgrlib.pla: 0328: 		LDA     $3000
		LDA     $3000
; libsrc/apple/dgrlib.pla: 0329:         STA     DSTL
        STA     DSTL
; libsrc/apple/dgrlib.pla: 0330:         LDA     $3001
        LDA     $3001
; libsrc/apple/dgrlib.pla: 0331: 		STA		DSTH
		STA		DSTH
; libsrc/apple/dgrlib.pla: 0332:         STX     ESP
        STX     ESP
; libsrc/apple/dgrlib.pla: 0333:         LDA     ESTKL,X       ; TILE
        LDA     ESTKL,X       ; TILE
; libsrc/apple/dgrlib.pla: 0334:         STA     SRCL
        STA     SRCL
; libsrc/apple/dgrlib.pla: 0335:         LDA     ESTKH,X
        LDA     ESTKH,X
; libsrc/apple/dgrlib.pla: 0336:         STA     SRCH
        STA     SRCH
; libsrc/apple/dgrlib.pla: 0337:         LDA     ESTKL+2,X   ; X1 COORD
        LDA     ESTKL+2,X   ; X1 COORD
; libsrc/apple/dgrlib.pla: 0338:         CMP     #80
        CMP     #80
; libsrc/apple/dgrlib.pla: 0339:         BPL     ++++
        BPL     ++++
; libsrc/apple/dgrlib.pla: 0340:         CLC
        CLC
; libsrc/apple/dgrlib.pla: 0341:         ADC     #$08
        ADC     #$08
; libsrc/apple/dgrlib.pla: 0342:         BMI     ++++
        BMI     ++++
; libsrc/apple/dgrlib.pla: 0343:         STA     ESTKH+2,X   ; X2 COORD
        STA     ESTKH+2,X   ; X2 COORD
; libsrc/apple/dgrlib.pla: 0344:         LDA     ESTKL+1,X   ; Y1 COORD
        LDA     ESTKL+1,X   ; Y1 COORD
; libsrc/apple/dgrlib.pla: 0345:         CMP     #48
        CMP     #48
; libsrc/apple/dgrlib.pla: 0346:         BPL     ++++
        BPL     ++++
; libsrc/apple/dgrlib.pla: 0347:         STA     TMPL        ; Y COORD
        STA     TMPL        ; Y COORD
; libsrc/apple/dgrlib.pla: 0348:         CLC
        CLC
; libsrc/apple/dgrlib.pla: 0349:         ADC     #$08
        ADC     #$08
; libsrc/apple/dgrlib.pla: 0350:         BMI     ++++
        BMI     ++++
; libsrc/apple/dgrlib.pla: 0351:         STA     ESTKH+1,X   ; Y2 COORD
        STA     ESTKH+1,X   ; Y2 COORD
; libsrc/apple/dgrlib.pla: 0352:         LDA     TMPL        ; Y COORD
        LDA     TMPL        ; Y COORD
; libsrc/apple/dgrlib.pla: 0353: -       CMP     #48
-       CMP     #48
; libsrc/apple/dgrlib.pla: 0354:         BCC     +
        BCC     +
; libsrc/apple/dgrlib.pla: 0355:         LDA     SRCL        ; SKIP TO NEXT ROW
        LDA     SRCL        ; SKIP TO NEXT ROW
; libsrc/apple/dgrlib.pla: 0356:         ADC     #$07        ; CARRY = 1
        ADC     #$07        ; CARRY = 1
; libsrc/apple/dgrlib.pla: 0357:         STA     SRCL
        STA     SRCL
; libsrc/apple/dgrlib.pla: 0358:         BCC     +++
        BCC     +++
; libsrc/apple/dgrlib.pla: 0359:         INC     SRCH
        INC     SRCH
; libsrc/apple/dgrlib.pla: 0360:         BNE     +++
        BNE     +++
; libsrc/apple/dgrlib.pla: 0361: +       AND     #$FE
+       AND     #$FE
; libsrc/apple/dgrlib.pla: 0362:         TAY
        TAY
; libsrc/apple/dgrlib.pla: 0363:         LDA     (DST),Y
        LDA     (DST),Y
; libsrc/apple/dgrlib.pla: 0364:         STA     GBASL
        STA     GBASL
; libsrc/apple/dgrlib.pla: 0365:         INY
        INY
; libsrc/apple/dgrlib.pla: 0366:         LDA     (DST),Y
        LDA     (DST),Y
; libsrc/apple/dgrlib.pla: 0367:         STA     GBASH
        STA     GBASH
; libsrc/apple/dgrlib.pla: 0368:         LDA     ESTKL+2,X   ; X1 COORD
        LDA     ESTKL+2,X   ; X1 COORD
; libsrc/apple/dgrlib.pla: 0369:         STA     TMPH        ; X COORD
        STA     TMPH        ; X COORD
; libsrc/apple/dgrlib.pla: 0370:         PHP
        PHP
; libsrc/apple/dgrlib.pla: 0371:         SEI
        SEI
; libsrc/apple/dgrlib.pla: 0372: --      LSR
--      LSR
; libsrc/apple/dgrlib.pla: 0373:         TAY
        TAY
; libsrc/apple/dgrlib.pla: 0374:         CMP     #40
        CMP     #40
; libsrc/apple/dgrlib.pla: 0375:         LDX     #$00
        LDX     #$00
; libsrc/apple/dgrlib.pla: 0376:         LDA     (SRC,X)
        LDA     (SRC,X)
; libsrc/apple/dgrlib.pla: 0377:         INC     SRCL
        INC     SRCL
; libsrc/apple/dgrlib.pla: 0378:         BNE     +
        BNE     +
; libsrc/apple/dgrlib.pla: 0379:         INC     SRCH
        INC     SRCH
; libsrc/apple/dgrlib.pla: 0380: +       BCS     +
+       BCS     +
; libsrc/apple/dgrlib.pla: 0381:         STA     $C005       ; WRITE AUX MEM
        STA     $C005       ; WRITE AUX MEM
; libsrc/apple/dgrlib.pla: 0382:         STA     (GBASE),Y
        STA     (GBASE),Y
; libsrc/apple/dgrlib.pla: 0383:         STA     $C004       ; WRITE MAIN MEM
        STA     $C004       ; WRITE MAIN MEM
; libsrc/apple/dgrlib.pla: 0384: +       LDA     (SRC,X)
+       LDA     (SRC,X)
; libsrc/apple/dgrlib.pla: 0385:         INC     SRCL
        INC     SRCL
; libsrc/apple/dgrlib.pla: 0386:         BNE     +
        BNE     +
; libsrc/apple/dgrlib.pla: 0387:         INC     SRCH
        INC     SRCH
; libsrc/apple/dgrlib.pla: 0388: +       BCS     ++
+       BCS     ++
; libsrc/apple/dgrlib.pla: 0389:         STA     (GBASE),Y
        STA     (GBASE),Y
; libsrc/apple/dgrlib.pla: 0390: ++      INC     TMPH        ; X COORD
++      INC     TMPH        ; X COORD
; libsrc/apple/dgrlib.pla: 0391:         INC     TMPH        ; X COORD
        INC     TMPH        ; X COORD
; libsrc/apple/dgrlib.pla: 0392:         LDA     TMPH
        LDA     TMPH
; libsrc/apple/dgrlib.pla: 0393:         BMI     --
        BMI     --
; libsrc/apple/dgrlib.pla: 0394:         LDX     ESP
        LDX     ESP
; libsrc/apple/dgrlib.pla: 0395:         CMP     ESTKH+2,X   ; X2 COORD
        CMP     ESTKH+2,X   ; X2 COORD
; libsrc/apple/dgrlib.pla: 0396:         BCC     --
        BCC     --
; libsrc/apple/dgrlib.pla: 0397:         PLP
        PLP
; libsrc/apple/dgrlib.pla: 0398: +++     INC     TMPL        ; Y COORD
+++     INC     TMPL        ; Y COORD
; libsrc/apple/dgrlib.pla: 0399:         INC     TMPL        ; Y COORD
        INC     TMPL        ; Y COORD
; libsrc/apple/dgrlib.pla: 0400:         LDA     TMPL
        LDA     TMPL
; libsrc/apple/dgrlib.pla: 0401:         BMI     -
        BMI     -
; libsrc/apple/dgrlib.pla: 0402:         CMP     ESTKH+1,X   ; Y2 COORD
        CMP     ESTKH+1,X   ; Y2 COORD
; libsrc/apple/dgrlib.pla: 0403:         BCC     -
        BCC     -
; libsrc/apple/dgrlib.pla: 0404: ++++    INX
++++    INX
; libsrc/apple/dgrlib.pla: 0405:         INX
        INX
; libsrc/apple/dgrlib.pla: 0406:         INX
        INX
; libsrc/apple/dgrlib.pla: 0407:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0408: end
; libsrc/apple/dgrlib.pla: 0409: //
; libsrc/apple/dgrlib.pla: 0410: // Draw a string of tiles
; libsrc/apple/dgrlib.pla: 0411: //
; libsrc/apple/dgrlib.pla: 0412: export asm dgrTileStr(x, y, tilestr, strlen, tilebuff)#0
_A016 					; dgrTileStr()
; libsrc/apple/dgrlib.pla: 0413: -       DEX
-       DEX
; libsrc/apple/dgrlib.pla: 0414:         DEX
        DEX
; libsrc/apple/dgrlib.pla: 0415:         DEX
        DEX
; libsrc/apple/dgrlib.pla: 0416:         LDA     ESTKL+7,X   ; X COORD
        LDA     ESTKL+7,X   ; X COORD
; libsrc/apple/dgrlib.pla: 0417:         STA     ESTKL+2,X
        STA     ESTKL+2,X
; libsrc/apple/dgrlib.pla: 0418:         LDA     ESTKL+6,X   ; Y COORD
        LDA     ESTKL+6,X   ; Y COORD
; libsrc/apple/dgrlib.pla: 0419:         STA     ESTKL+1,X
        STA     ESTKL+1,X
; libsrc/apple/dgrlib.pla: 0420:         LDA     ESTKL+3,X   ; TILE
        LDA     ESTKL+3,X   ; TILE
; libsrc/apple/dgrlib.pla: 0421:         STA     ESTKL,X
        STA     ESTKL,X
; libsrc/apple/dgrlib.pla: 0422:         LDA     ESTKH+3,X   ; TILE
        LDA     ESTKH+3,X   ; TILE
; libsrc/apple/dgrlib.pla: 0423:         STA     ESTKH,X
        STA     ESTKH,X
; libsrc/apple/dgrlib.pla: 0424: end
; libsrc/apple/dgrlib.pla: 0425: asm _dgrTileTile
_A017 					; _dgrTileTile()
; libsrc/apple/dgrlib.pla: 0426:         JSR     $5000
        JSR     $5000
; libsrc/apple/dgrlib.pla: 0427:         LDA     ESTKL+4,X   ; UPDATE X COORD
        LDA     ESTKL+4,X   ; UPDATE X COORD
; libsrc/apple/dgrlib.pla: 0428:         CLC
        CLC
; libsrc/apple/dgrlib.pla: 0429:         ADC     #$08
        ADC     #$08
; libsrc/apple/dgrlib.pla: 0430:         CMP     #80         ; OFF RIGHT SIDE
        CMP     #80         ; OFF RIGHT SIDE
; libsrc/apple/dgrlib.pla: 0431:         BPL     +
        BPL     +
; libsrc/apple/dgrlib.pla: 0432:         STA     ESTKL+4,X
        STA     ESTKL+4,X
; libsrc/apple/dgrlib.pla: 0433:         DEC     ESTKL+1,X   ; DEC STRLEN
        DEC     ESTKL+1,X   ; DEC STRLEN
; libsrc/apple/dgrlib.pla: 0434:         BNE     -
        BNE     -
; libsrc/apple/dgrlib.pla: 0435: +       INX
+       INX
; libsrc/apple/dgrlib.pla: 0436:         INX
        INX
; libsrc/apple/dgrlib.pla: 0437:         INX
        INX
; libsrc/apple/dgrlib.pla: 0438:         INX
        INX
; libsrc/apple/dgrlib.pla: 0439:         INX
        INX
; libsrc/apple/dgrlib.pla: 0440:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0441: end
; libsrc/apple/dgrlib.pla: 0442: //
; libsrc/apple/dgrlib.pla: 0443: // Fill a buffer with tiles
; libsrc/apple/dgrlib.pla: 0444: //
; libsrc/apple/dgrlib.pla: 0445: export asm dgrFill(x, y, tile)#0
_A018 					; dgrFill()
; libsrc/apple/dgrlib.pla: 0446:         LDA     ESTKL+2,X
        LDA     ESTKL+2,X
; libsrc/apple/dgrlib.pla: 0447:         AND     #$0F
        AND     #$0F
; libsrc/apple/dgrlib.pla: 0448:         STA     ESTKL+2,X
        STA     ESTKL+2,X
; libsrc/apple/dgrlib.pla: 0449:         LDA     ESTKL+1,X
        LDA     ESTKL+1,X
; libsrc/apple/dgrlib.pla: 0450:         AND     #$0F
        AND     #$0F
; libsrc/apple/dgrlib.pla: 0451:         STA     ESTKL+1,X
        STA     ESTKL+1,X
; libsrc/apple/dgrlib.pla: 0452:         LDA     #$00
        LDA     #$00
; libsrc/apple/dgrlib.pla: 0453:         SEC
        SEC
; libsrc/apple/dgrlib.pla: 0454:         SBC     ESTKL+2,X   ; ORIGINAL X
        SBC     ESTKL+2,X   ; ORIGINAL X
; libsrc/apple/dgrlib.pla: 0455:         STA     ESTKL+2,X
        STA     ESTKL+2,X
; libsrc/apple/dgrlib.pla: 0456:         STA     ESTKH+2,X
        STA     ESTKH+2,X
; libsrc/apple/dgrlib.pla: 0457:         LDA     #$00
        LDA     #$00
; libsrc/apple/dgrlib.pla: 0458:         SEC
        SEC
; libsrc/apple/dgrlib.pla: 0459:         SBC     ESTKL+1,X
        SBC     ESTKL+1,X
; libsrc/apple/dgrlib.pla: 0460:         STA     ESTKL+1,X
        STA     ESTKL+1,X
; libsrc/apple/dgrlib.pla: 0461: -       DEX
-       DEX
; libsrc/apple/dgrlib.pla: 0462:         DEX
        DEX
; libsrc/apple/dgrlib.pla: 0463:         DEX
        DEX
; libsrc/apple/dgrlib.pla: 0464:         LDA     ESTKL+5,X   ; X COORD
        LDA     ESTKL+5,X   ; X COORD
; libsrc/apple/dgrlib.pla: 0465:         STA     ESTKL+2,X
        STA     ESTKL+2,X
; libsrc/apple/dgrlib.pla: 0466:         LDA     ESTKL+4,X   ; Y COORD
        LDA     ESTKL+4,X   ; Y COORD
; libsrc/apple/dgrlib.pla: 0467:         STA     ESTKL+1,X
        STA     ESTKL+1,X
; libsrc/apple/dgrlib.pla: 0468:         LDA     ESTKL+3,X   ; TILE
        LDA     ESTKL+3,X   ; TILE
; libsrc/apple/dgrlib.pla: 0469:         STA     ESTKL,X
        STA     ESTKL,X
; libsrc/apple/dgrlib.pla: 0470:         LDA     ESTKH+3,X   ; TILE
        LDA     ESTKH+3,X   ; TILE
; libsrc/apple/dgrlib.pla: 0471:         STA     ESTKH,X
        STA     ESTKH,X
; libsrc/apple/dgrlib.pla: 0472: end
; libsrc/apple/dgrlib.pla: 0473: asm _dgrFillTile
_A019 					; _dgrFillTile()
; libsrc/apple/dgrlib.pla: 0474:         JSR     $5000
        JSR     $5000
; libsrc/apple/dgrlib.pla: 0475:         LDA     ESTKL+2,X   ; UPDATE X COORD
        LDA     ESTKL+2,X   ; UPDATE X COORD
; libsrc/apple/dgrlib.pla: 0476:         CLC
        CLC
; libsrc/apple/dgrlib.pla: 0477:         ADC     #$08
        ADC     #$08
; libsrc/apple/dgrlib.pla: 0478:         STA     ESTKL+2,X
        STA     ESTKL+2,X
; libsrc/apple/dgrlib.pla: 0479:         CMP     #80         ; OFF RIGHT SIDE?
        CMP     #80         ; OFF RIGHT SIDE?
; libsrc/apple/dgrlib.pla: 0480:         BMI     -
        BMI     -
; libsrc/apple/dgrlib.pla: 0481:         LDA     ESTKH+2,X   ; RESTORE X COORD
        LDA     ESTKH+2,X   ; RESTORE X COORD
; libsrc/apple/dgrlib.pla: 0482:         STA     ESTKL+2,X
        STA     ESTKL+2,X
; libsrc/apple/dgrlib.pla: 0483:         LDA     ESTKL+1,X   ; UPDATE Y COORD
        LDA     ESTKL+1,X   ; UPDATE Y COORD
; libsrc/apple/dgrlib.pla: 0484:         CLC
        CLC
; libsrc/apple/dgrlib.pla: 0485:         ADC     #$08
        ADC     #$08
; libsrc/apple/dgrlib.pla: 0486:         STA     ESTKL+1,X
        STA     ESTKL+1,X
; libsrc/apple/dgrlib.pla: 0487:         CMP     #48         ; OFF BOTTOM?
        CMP     #48         ; OFF BOTTOM?
; libsrc/apple/dgrlib.pla: 0488:         BMI     -
        BMI     -
; libsrc/apple/dgrlib.pla: 0489:         INX
        INX
; libsrc/apple/dgrlib.pla: 0490:         INX
        INX
; libsrc/apple/dgrlib.pla: 0491:         INX
        INX
; libsrc/apple/dgrlib.pla: 0492:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0493: end
; libsrc/apple/dgrlib.pla: 0494: //
; libsrc/apple/dgrlib.pla: 0495: // Wait for VLB
; libsrc/apple/dgrlib.pla: 0496: //
; libsrc/apple/dgrlib.pla: 0497: export asm dgrVLB#0
_A020 					; dgrVLB()
; libsrc/apple/dgrlib.pla: 0498:         PHP
        PHP
; libsrc/apple/dgrlib.pla: 0499:         SEI
        SEI
; libsrc/apple/dgrlib.pla: 0500:         STA     $C079   ; Enable IOU access and reset VBL int on //c
        STA     $C079   ; Enable IOU access and reset VBL int on //c
; libsrc/apple/dgrlib.pla: 0501:         STA     $C05B   ; Enable VBL int
        STA     $C05B   ; Enable VBL int
; libsrc/apple/dgrlib.pla: 0502: -       LDA     $C019
-       LDA     $C019
; libsrc/apple/dgrlib.pla: 0503:         STA     $C079   ; Reset VBL int on //c
        STA     $C079   ; Reset VBL int on //c
; libsrc/apple/dgrlib.pla: 0504:         BMI     -
        BMI     -
; libsrc/apple/dgrlib.pla: 0505: -       LDA     $C019
-       LDA     $C019
; libsrc/apple/dgrlib.pla: 0506:         BPL     -
        BPL     -
; libsrc/apple/dgrlib.pla: 0507:         STA     $C05A   ; Disable VBL int on //c
        STA     $C05A   ; Disable VBL int on //c
; libsrc/apple/dgrlib.pla: 0508:         STA     $C078   ; Disable IOU access on //c
        STA     $C078   ; Disable IOU access on //c
; libsrc/apple/dgrlib.pla: 0509:         PLP
        PLP
; libsrc/apple/dgrlib.pla: 0510:         RTS
        RTS
; libsrc/apple/dgrlib.pla: 0511: end
; libsrc/apple/dgrlib.pla: 0512: //
; libsrc/apple/dgrlib.pla: 0513: // Clear the buffer
; libsrc/apple/dgrlib.pla: 0514: //
; libsrc/apple/dgrlib.pla: 0515: export def dgrClear(clr)#0
	!BYTE	$00			; PAD BYTE
_SUBSEG 				; BYTECODE STARTS
					; clr -> [0]
_C000 					; dgrClear()
; libsrc/apple/dgrlib.pla: 0516:     byte[32] clrtile
					; clrtile -> [2]
; libsrc/apple/dgrlib.pla: 0517: 
; libsrc/apple/dgrlib.pla: 0518:     clr = evnclr[clr&$0F] | (oddclr[clr&$0F] << 8)
	!BYTE	$58,$22,$01		; ENTER	34,1
; libsrc/apple/dgrlib.pla: 0519:     memset(@clrtile, clr, 32)
; libsrc/apple/dgrlib.pla: 0520:     dgrFill(0, 0, @clrtile)
; libsrc/apple/dgrlib.pla: 0521: end
	!BYTE	$26			; LA	_D033+0
_F002 	!WORD	_D033+0		
	!BYTE	$66,$00			; LLW	[0]
	!BYTE	$3C,$0F			; ANDI	15
	!BYTE	$82			; ADD 
	!BYTE	$60			; LB
	!BYTE	$26			; LA	_D034+0
_F003 	!WORD	_D034+0		
	!BYTE	$66,$00			; LLW	[0]
	!BYTE	$3C,$0F			; ANDI	15
	!BYTE	$82			; ADD 
	!BYTE	$60			; LB
	!BYTE	$10			; CN	8
	!BYTE	$9A			; SHL
	!BYTE	$96			; OR 
	!BYTE	$76,$00			; SLW	[0]
	!BYTE	$28,$02			; LLA	[2]
	!BYTE	$66,$00			; LLW	[0]
	!BYTE	$2A,$20			; CB	32
	!BYTE	$54			; CALL	_X017
_F004 	!WORD	0		
	!BYTE	$00			; CN	0
	!BYTE	$00			; CN	0
	!BYTE	$28,$02			; LLA	[2]
	!BYTE	$54			; CALL	_A018
_F005 	!WORD	_A018		
	!BYTE	$5A,$22			; LEAVE	34
; libsrc/apple/dgrlib.pla: 0522: export def dgrMode(mode)#1
					; mode -> [0]
_C001 					; dgrMode()
; libsrc/apple/dgrlib.pla: 0523:     if mode
	!BYTE	$58,$02,$01		; ENTER	2,1
; libsrc/apple/dgrlib.pla: 0524:         //
; libsrc/apple/dgrlib.pla: 0525:         // Set double lores graphics, return draw buffer
; libsrc/apple/dgrlib.pla: 0526:         //
; libsrc/apple/dgrlib.pla: 0527:         ^showlores
; libsrc/apple/dgrlib.pla: 0528:         ^showfull
; libsrc/apple/dgrlib.pla: 0529:         ^showgraphics
; libsrc/apple/dgrlib.pla: 0530:         ^showpage1
; libsrc/apple/dgrlib.pla: 0531:         ^ena80  = 0
; libsrc/apple/dgrlib.pla: 0532:         ^show80 = 0
; libsrc/apple/dgrlib.pla: 0533:         ^an3on
; libsrc/apple/dgrlib.pla: 0534:         drawpage = 1
; libsrc/apple/dgrlib.pla: 0535:         drawbuff = dgrbuff[1]
; libsrc/apple/dgrlib.pla: 0536:         return 1
	!BYTE	$66,$00			; LLW	[0]
	!BYTE	$4C			; BRFLS	_B001
	!WORD	_B001-*
	!BYTE	$68,$56,$C0		; LAB	49238
	!BYTE	$30			; DROP 
	!BYTE	$68,$52,$C0		; LAB	49234
	!BYTE	$30			; DROP 
	!BYTE	$68,$50,$C0		; LAB	49232
	!BYTE	$30			; DROP 
	!BYTE	$68,$54,$C0		; LAB	49236
	!BYTE	$30			; DROP 
	!BYTE	$00			; CN	0
	!BYTE	$78,$7E,$C0		; SAB	49278
	!BYTE	$00			; CN	0
	!BYTE	$78,$0D,$C0		; SAB	49165
	!BYTE	$68,$5E,$C0		; LAB	49246
	!BYTE	$30			; DROP 
	!BYTE	$02			; CN	1
	!BYTE	$78			; SAB	_D032+0
_F006 	!WORD	_D032+0		
	!BYTE	$6A			; LAW	_D030+2
_F007 	!WORD	_D030+2		
	!BYTE	$7A			; SAW	_D031+0
_F008 	!WORD	_D031+0		
	!BYTE	$02			; CN	1
	!BYTE	$5A,$02			; LEAVE	2
; libsrc/apple/dgrlib.pla: 0537:     fin
_B001 
_B002 
; libsrc/apple/dgrlib.pla: 0538:     //
; libsrc/apple/dgrlib.pla: 0539:     // Set text mode
; libsrc/apple/dgrlib.pla: 0540:     //
; libsrc/apple/dgrlib.pla: 0541:     ^showtext
; libsrc/apple/dgrlib.pla: 0542:     ^showpage1
; libsrc/apple/dgrlib.pla: 0543:     ^ena80   = 0
; libsrc/apple/dgrlib.pla: 0544:     ^show40  = 0
; libsrc/apple/dgrlib.pla: 0545:     ^mapmain = 0
; libsrc/apple/dgrlib.pla: 0546:     ^an3off
; libsrc/apple/dgrlib.pla: 0547:     call($FC58, 0, 0, 0, 0) // home()
; libsrc/apple/dgrlib.pla: 0548:     return 0
	!BYTE	$68,$51,$C0		; LAB	49233
	!BYTE	$30			; DROP 
	!BYTE	$68,$54,$C0		; LAB	49236
	!BYTE	$30			; DROP 
	!BYTE	$00			; CN	0
	!BYTE	$78,$7E,$C0		; SAB	49278
	!BYTE	$00			; CN	0
	!BYTE	$78,$0C,$C0		; SAB	49164
	!BYTE	$00			; CN	0
	!BYTE	$78,$00,$C0		; SAB	49152
	!BYTE	$68,$5F,$C0		; LAB	49247
	!BYTE	$30			; DROP 
	!BYTE	$2C,$58,$FC		; CW	64600
	!BYTE	$00			; CN	0
	!BYTE	$00			; CN	0
	!BYTE	$00			; CN	0
	!BYTE	$00			; CN	0
	!BYTE	$54			; CALL	_X010
_F009 	!WORD	0		
	!BYTE	$30			; DROP 
	!BYTE	$00			; CN	0
	!BYTE	$5A,$02			; LEAVE	2
; libsrc/apple/dgrlib.pla: 0549: end
; libsrc/apple/dgrlib.pla: 0550: //
; libsrc/apple/dgrlib.pla: 0551: // Set display page, return other page
; libsrc/apple/dgrlib.pla: 0552: //
; libsrc/apple/dgrlib.pla: 0553: export def dgrShow(page)#1
					; page -> [0]
_C002 					; dgrShow()
; libsrc/apple/dgrlib.pla: 0554:     page = page & 1
	!BYTE	$58,$02,$01		; ENTER	2,1
; libsrc/apple/dgrlib.pla: 0555:     ^(showpage1 + page)
; libsrc/apple/dgrlib.pla: 0556:     return page ^ 1
	!BYTE	$66,$00			; LLW	[0]
	!BYTE	$3C,$01			; ANDI	1
	!BYTE	$76,$00			; SLW	[0]
	!BYTE	$2C,$54,$C0		; CW	49236
	!BYTE	$B2,$00			; ADDLW	[0]
	!BYTE	$60			; LB
	!BYTE	$30			; DROP 
	!BYTE	$66,$00			; LLW	[0]
	!BYTE	$02			; CN	1
	!BYTE	$98			; XOR
	!BYTE	$5A,$02			; LEAVE	2
; libsrc/apple/dgrlib.pla: 0557: end
; libsrc/apple/dgrlib.pla: 0558: export def dgrSwap#0
_C003 					; dgrSwap()
; libsrc/apple/dgrlib.pla: 0559:     ^(showpage1 + drawpage)
; libsrc/apple/dgrlib.pla: 0560:     drawpage   = drawpage ^ 1
; libsrc/apple/dgrlib.pla: 0561:     drawbuff = dgrbuff[drawpage]
; libsrc/apple/dgrlib.pla: 0562: end
	!BYTE	$2C,$54,$C0		; CW	49236
	!BYTE	$B4			; ADDAB	_D032+0
_F010 	!WORD	_D032+0		
	!BYTE	$60			; LB
	!BYTE	$30			; DROP 
	!BYTE	$68			; LAB	_D032+0
_F011 	!WORD	_D032+0		
	!BYTE	$02			; CN	1
	!BYTE	$98			; XOR
	!BYTE	$78			; SAB	_D032+0
_F012 	!WORD	_D032+0		
	!BYTE	$26			; LA	_D030+0
_F013 	!WORD	_D030+0		
	!BYTE	$BC			; IDXAB	_D032+0
_F014 	!WORD	_D032+0		
	!BYTE	$62			; LW
	!BYTE	$7A			; SAW	_D031+0
_F015 	!WORD	_D031+0		
	!BYTE	$5C			; RET
; libsrc/apple/dgrlib.pla: 0563: export def dgrDrawBuf(page)#0
					; page -> [0]
_C004 					; dgrDrawBuf()
; libsrc/apple/dgrlib.pla: 0564:     drawpage   = page
	!BYTE	$58,$02,$01		; ENTER	2,1
; libsrc/apple/dgrlib.pla: 0565:     drawbuff = dgrbuff[drawpage]
; libsrc/apple/dgrlib.pla: 0566: end
	!BYTE	$66,$00			; LLW	[0]
	!BYTE	$78			; SAB	_D032+0
_F016 	!WORD	_D032+0		
	!BYTE	$26			; LA	_D030+0
_F017 	!WORD	_D030+0		
	!BYTE	$BC			; IDXAB	_D032+0
_F018 	!WORD	_D032+0		
	!BYTE	$62			; LW
	!BYTE	$7A			; SAW	_D031+0
_F019 	!WORD	_D031+0		
	!BYTE	$5A,$02			; LEAVE	2
; libsrc/apple/dgrlib.pla: 0567: //
; libsrc/apple/dgrlib.pla: 0568: // Set color for clear & plot routines
; libsrc/apple/dgrlib.pla: 0569: //
; libsrc/apple/dgrlib.pla: 0570: export def dgrColor(clr)#0
					; clr -> [0]
_C005 					; dgrColor()
; libsrc/apple/dgrlib.pla: 0571:     ^$30 = clr & $0F
	!BYTE	$58,$02,$01		; ENTER	2,1
; libsrc/apple/dgrlib.pla: 0572: end
	!BYTE	$66,$00			; LLW	[0]
	!BYTE	$3C,$0F			; ANDI	15
	!BYTE	$78,$30,$00		; SAB	48
	!BYTE	$5A,$02			; LEAVE	2
; libsrc/apple/dgrlib.pla: 0573: //
; libsrc/apple/dgrlib.pla: 0574: // Make sure we are a 128K //e or //c
; libsrc/apple/dgrlib.pla: 0575: //
; libsrc/apple/dgrlib.pla: 0576: if MACHID & $F0 <> $B0
_INIT 
; libsrc/apple/dgrlib.pla: 0577:     puts("\n128K required for double-lores.\n")
	!BYTE	$68			; LAB	_X001+0
_F020 	!WORD	0+0		
	!BYTE	$3C,$F0			; ANDI	240
	!BYTE	$2A,$B0			; CB	176
	!BYTE	$22			; BREQ	_B003
	!WORD	_B003-*
	!BYTE	$2E			; CS
	!BYTE	$21
	!BYTE	$0D,$31,$32,$38,$4B,$20,$72,$65
	!BYTE	$71,$75,$69,$72,$65,$64,$20,$66
	!BYTE	$6F,$72,$20,$64,$6F,$75,$62,$6C
	!BYTE	$65,$2D,$6C,$6F,$72,$65,$73,$2E
	!BYTE	$0D
	!BYTE	$54			; CALL	_X004
_F021 	!WORD	0		
; libsrc/apple/dgrlib.pla: 0578:     ^$C010
; libsrc/apple/dgrlib.pla: 0579:     while ^$C000 < 128; loop
	!BYTE	$68,$10,$C0		; LAB	49168
	!BYTE	$30			; DROP 
	!BYTE	$50			; BRNCH	_B007
	!WORD	_B007-*
_B005 
_B007 
	!BYTE	$68,$00,$C0		; LAB	49152
	!BYTE	$2A,$80			; CB	128
	!BYTE	$46			; ISLT
	!BYTE	$4E			; BRTRU	_B005
	!WORD	_B005-*
_B006 
; libsrc/apple/dgrlib.pla: 0580:     return -1
	!BYTE	$20			; MINUS ONE
	!BYTE	$5C			; RET
; libsrc/apple/dgrlib.pla: 0581: fin
_B003 
_B004 
; libsrc/apple/dgrlib.pla: 0582: //
; libsrc/apple/dgrlib.pla: 0583: // Assembly fixups
; libsrc/apple/dgrlib.pla: 0584: //
; libsrc/apple/dgrlib.pla: 0585: _dgrPlotPix:1   = @_dgrSetPix
; libsrc/apple/dgrlib.pla: 0586: _dgrHLinPix:1   = @_dgrSetPix
; libsrc/apple/dgrlib.pla: 0587: _dgrVLinPix:1   = @_dgrSetPix
; libsrc/apple/dgrlib.pla: 0588: _dgrBLTPix:1    = @_dgrSetPix
; libsrc/apple/dgrlib.pla: 0589: _dgrTileTile:1  = @dgrTile
; libsrc/apple/dgrlib.pla: 0590: _dgrFillTile:1  = @dgrTile
; libsrc/apple/dgrlib.pla: 0591: _dgrSetEvnEvn:1 = @evnclr
; libsrc/apple/dgrlib.pla: 0592: _dgrSetEvnOdd:1 = @oddclr
; libsrc/apple/dgrlib.pla: 0593: _dgrSetOddEvn:1 = @evnclr
; libsrc/apple/dgrlib.pla: 0594: _dgrSetOddOdd:1 = @oddclr
; libsrc/apple/dgrlib.pla: 0595: //
; libsrc/apple/dgrlib.pla: 0596: // Fixups for drawbuff
; libsrc/apple/dgrlib.pla: 0597: //
; libsrc/apple/dgrlib.pla: 0598: dgrPlot:1       = @drawbuff
; libsrc/apple/dgrlib.pla: 0599: dgrPlot:6       = @drawbuff+1
; libsrc/apple/dgrlib.pla: 0600: dgrHLin:1       = @drawbuff
; libsrc/apple/dgrlib.pla: 0601: dgrHLin:6       = @drawbuff+1
; libsrc/apple/dgrlib.pla: 0602: dgrVLin:1       = @drawbuff
; libsrc/apple/dgrlib.pla: 0603: dgrVLin:6       = @drawbuff+1
; libsrc/apple/dgrlib.pla: 0604: dgrBLT:1        = @drawbuff
; libsrc/apple/dgrlib.pla: 0605: dgrBLT:6        = @drawbuff+1
; libsrc/apple/dgrlib.pla: 0606: dgrTile:1       = @drawbuff
; libsrc/apple/dgrlib.pla: 0607: dgrTile:6       = @drawbuff+1
; libsrc/apple/dgrlib.pla: 0608: // Put read AUX mem routine in scary location
; libsrc/apple/dgrlib.pla: 0609: memcpy($0100, @auxRead, 9)
; libsrc/apple/dgrlib.pla: 0610: done
	!BYTE	$26			; LA	_A009+0
_F022 	!WORD	_A009+0		
	!BYTE	$7A			; SAW	_A002+1
_F023 	!WORD	_A002+1		
	!BYTE	$26			; LA	_A009+0
_F024 	!WORD	_A009+0		
	!BYTE	$7A			; SAW	_A004+1
_F025 	!WORD	_A004+1		
	!BYTE	$26			; LA	_A009+0
_F026 	!WORD	_A009+0		
	!BYTE	$7A			; SAW	_A006+1
_F027 	!WORD	_A006+1		
	!BYTE	$26			; LA	_A009+0
_F028 	!WORD	_A009+0		
	!BYTE	$7A			; SAW	_A008+1
_F029 	!WORD	_A008+1		
	!BYTE	$26			; LA	_A015+0
_F030 	!WORD	_A015+0		
	!BYTE	$7A			; SAW	_A017+1
_F031 	!WORD	_A017+1		
	!BYTE	$26			; LA	_A015+0
_F032 	!WORD	_A015+0		
	!BYTE	$7A			; SAW	_A019+1
_F033 	!WORD	_A019+1		
	!BYTE	$26			; LA	_D033+0
_F034 	!WORD	_D033+0		
	!BYTE	$7A			; SAW	_A010+1
_F035 	!WORD	_A010+1		
	!BYTE	$26			; LA	_D034+0
_F036 	!WORD	_D034+0		
	!BYTE	$7A			; SAW	_A011+1
_F037 	!WORD	_A011+1		
	!BYTE	$26			; LA	_D033+0
_F038 	!WORD	_D033+0		
	!BYTE	$7A			; SAW	_A012+1
_F039 	!WORD	_A012+1		
	!BYTE	$26			; LA	_D034+0
_F040 	!WORD	_D034+0		
	!BYTE	$7A			; SAW	_A013+1
_F041 	!WORD	_A013+1		
	!BYTE	$26			; LA	_D031+0
_F042 	!WORD	_D031+0		
	!BYTE	$7A			; SAW	_A001+1
_F043 	!WORD	_A001+1		
	!BYTE	$26			; LA	_D031+1
_F044 	!WORD	_D031+1		
	!BYTE	$7A			; SAW	_A001+6
_F045 	!WORD	_A001+6		
	!BYTE	$26			; LA	_D031+0
_F046 	!WORD	_D031+0		
	!BYTE	$7A			; SAW	_A003+1
_F047 	!WORD	_A003+1		
	!BYTE	$26			; LA	_D031+1
_F048 	!WORD	_D031+1		
	!BYTE	$7A			; SAW	_A003+6
_F049 	!WORD	_A003+6		
	!BYTE	$26			; LA	_D031+0
_F050 	!WORD	_D031+0		
	!BYTE	$7A			; SAW	_A005+1
_F051 	!WORD	_A005+1		
	!BYTE	$26			; LA	_D031+1
_F052 	!WORD	_D031+1		
	!BYTE	$7A			; SAW	_A005+6
_F053 	!WORD	_A005+6		
	!BYTE	$26			; LA	_D031+0
_F054 	!WORD	_D031+0		
	!BYTE	$7A			; SAW	_A007+1
_F055 	!WORD	_A007+1		
	!BYTE	$26			; LA	_D031+1
_F056 	!WORD	_D031+1		
	!BYTE	$7A			; SAW	_A007+6
_F057 	!WORD	_A007+6		
	!BYTE	$26			; LA	_D031+0
_F058 	!WORD	_D031+0		
	!BYTE	$7A			; SAW	_A015+1
_F059 	!WORD	_A015+1		
	!BYTE	$26			; LA	_D031+1
_F060 	!WORD	_D031+1		
	!BYTE	$7A			; SAW	_A015+6
_F061 	!WORD	_A015+6		
	!BYTE	$2C,$00,$01		; CW	256
	!BYTE	$26			; LA	_A014+0
_F062 	!WORD	_A014+0		
	!BYTE	$12			; CN	9
	!BYTE	$54			; CALL	_X018
_F063 	!WORD	0		
	!BYTE	$00			; CN	0
	!BYTE	$5C			; RET
_SYSFLAGS	=	0
_DEFCNT	=	7
_SEGEND 
;
; RE-LOCATEABLE DICTIONARY
;
	!BYTE	$02			; CODE TABLE FIXUP
	!WORD	_C000		
	!BYTE	$00
	!BYTE	$02			; CODE TABLE FIXUP
	!WORD	_C001		
	!BYTE	$00
	!BYTE	$02			; CODE TABLE FIXUP
	!WORD	_C002		
	!BYTE	$00
	!BYTE	$02			; CODE TABLE FIXUP
	!WORD	_C003		
	!BYTE	$00
	!BYTE	$02			; CODE TABLE FIXUP
	!WORD	_C004		
	!BYTE	$00
	!BYTE	$02			; CODE TABLE FIXUP
	!WORD	_C005		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F000-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F001-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F002-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F003-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$91			; EXTERNAL FIXUP
	!WORD	_F004-_SEGBEGIN		
	!BYTE	17			; ESD INDEX
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F005-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F006-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F007-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F008-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$91			; EXTERNAL FIXUP
	!WORD	_F009-_SEGBEGIN		
	!BYTE	10			; ESD INDEX
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F010-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F011-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F012-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F013-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F014-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F015-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F016-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F017-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F018-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F019-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$91			; EXTERNAL FIXUP
	!WORD	_F020-_SEGBEGIN		
	!BYTE	1			; ESD INDEX
	!BYTE	$91			; EXTERNAL FIXUP
	!WORD	_F021-_SEGBEGIN		
	!BYTE	4			; ESD INDEX
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F022-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F023-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F024-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F025-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F026-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F027-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F028-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F029-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F030-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F031-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F032-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F033-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F034-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F035-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F036-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F037-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F038-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F039-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F040-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F041-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F042-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F043-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F044-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F045-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F046-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F047-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F048-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F049-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F050-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F051-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F052-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F053-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F054-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F055-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F056-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F057-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F058-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F059-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F060-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F061-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$81			; INTERNAL FIXUP
	!WORD	_F062-_SEGBEGIN		
	!BYTE	$00
	!BYTE	$91			; EXTERNAL FIXUP
	!WORD	_F063-_SEGBEGIN		
	!BYTE	18			; ESD INDEX
	!BYTE	$00			; END OF RLD
;
; EXTERNAL/ENTRY SYMBOL DICTIONARY
;
	; DCI STRING: MACHID
	!BYTE	$CD,$C1,$C3,$C8,$C9,$44
	!BYTE	$10			; EXTERNAL SYMBOL FLAG
	!WORD	1			; ESD INDEX
	; DCI STRING: PUTS
	!BYTE	$D0,$D5,$D4,$53
	!BYTE	$10			; EXTERNAL SYMBOL FLAG
	!WORD	4			; ESD INDEX
	; DCI STRING: CALL
	!BYTE	$C3,$C1,$CC,$4C
	!BYTE	$10			; EXTERNAL SYMBOL FLAG
	!WORD	10			; ESD INDEX
	; DCI STRING: MEMSET
	!BYTE	$CD,$C5,$CD,$D3,$C5,$54
	!BYTE	$10			; EXTERNAL SYMBOL FLAG
	!WORD	17			; ESD INDEX
	; DCI STRING: MEMCPY
	!BYTE	$CD,$C5,$CD,$C3,$D0,$59
	!BYTE	$10			; EXTERNAL SYMBOL FLAG
	!WORD	18			; ESD INDEX
	; DCI STRING: DGRPLOT
	!BYTE	$C4,$C7,$D2,$D0,$CC,$CF,$54
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_A001		
	; DCI STRING: DGRHLIN
	!BYTE	$C4,$C7,$D2,$C8,$CC,$C9,$4E
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_A003		
	; DCI STRING: DGRVLIN
	!BYTE	$C4,$C7,$D2,$D6,$CC,$C9,$4E
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_A005		
	; DCI STRING: DGRBLT
	!BYTE	$C4,$C7,$D2,$C2,$CC,$54
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_A007		
	; DCI STRING: DGRTILE
	!BYTE	$C4,$C7,$D2,$D4,$C9,$CC,$45
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_A015		
	; DCI STRING: DGRTILESTR
	!BYTE	$C4,$C7,$D2,$D4,$C9,$CC,$C5,$D3,$D4,$52
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_A016		
	; DCI STRING: DGRFILL
	!BYTE	$C4,$C7,$D2,$C6,$C9,$CC,$4C
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_A018		
	; DCI STRING: DGRVLB
	!BYTE	$C4,$C7,$D2,$D6,$CC,$42
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_A020		
	; DCI STRING: DGRCLEAR
	!BYTE	$C4,$C7,$D2,$C3,$CC,$C5,$C1,$52
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_C000		
	; DCI STRING: DGRMODE
	!BYTE	$C4,$C7,$D2,$CD,$CF,$C4,$45
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_C001		
	; DCI STRING: DGRSHOW
	!BYTE	$C4,$C7,$D2,$D3,$C8,$CF,$57
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_C002		
	; DCI STRING: DGRSWAP
	!BYTE	$C4,$C7,$D2,$D3,$D7,$C1,$50
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_C003		
	; DCI STRING: DGRDRAWBUF
	!BYTE	$C4,$C7,$D2,$C4,$D2,$C1,$D7,$C2,$D5,$46
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_C004		
	; DCI STRING: DGRCOLOR
	!BYTE	$C4,$C7,$D2,$C3,$CF,$CC,$CF,$52
	!BYTE	$08			; ENTRY SYMBOL FLAG
	!WORD	_C005		
	!BYTE	$00			; END OF ESD
